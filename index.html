<!DOCTYPE html>
<html>
<head>
  <title>Ecological Sensing AI Lab MMS trajectory</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjP2B6Owwx2GMgsc8jqRi68sDZ2Lbnaz0&region=KR&language=en"></script>
  <script>
    function initialize() {
      var mapOptions = {
        zoom: 10,
        center: new google.maps.LatLng(37.17, 127.00)
      };

      var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
      
      var kmlUrls = [
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210803_Suwon_Ginkgo_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210803_Suwon_Zelkova_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210811_Suwon_Zelkova_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210811_Suwon_Prunus_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210811_Suwon_Mixed_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210826_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210826_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210826_Suwon_Mixed3_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210830_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210910_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210924_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210924_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210924_Suwon_Mixed3_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210924_Suwon_Mixed4_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210927_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210927_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/210927_Suwon_Mixed3_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211001_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211001_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211001_Suwon_Mixed4_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211001_Suwon_Mixed5_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211013_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211013_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211013_Suwon_Mixed3_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211013_Suwon_Mixed4_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211021_Suwon_Mixed1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/211021_Suwon_Mixed2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/230428_Suwon_Zone1_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/230428_Suwon_Zone2_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/230827_Suwon_1200hr_route.kml',
        'https://raw.githubusercontent.com/Tackang/Tackang.github.io/main/MMS_route_KML/230827_Suwon_1500hr_route.kml'
        // Add more KML URLs here
      ];

// New function to load KML layers sequentially
function loadKmlLayersSequentially(urls, map, index = 0) {
  if (index >= urls.length) return;

  var layer = new google.maps.KmlLayer({
    url: urls[index],
    map: map
  });

  google.maps.event.addListenerOnce(layer, 'status_changed', function() {
    if (layer.getStatus() === 'OK') {
      // Load next layer
      loadKmlLayersSequentially(urls, map, index + 1);
    } else {
      console.error('Failed to load KML layer:', urls[index]);
    }
  });
}

// Modify the initialize function
function initialize() {
  // existing code for map initialization
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  loadKmlLayersSequentially(kmlUrls, map);
}

    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>
<body>
  <div id="map-canvas" style="height: 800px; width: 100%;"></div>
</body>
</html>
